<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="小宇" />



<meta name="description" content="The binary install package downloaded from the official website is not suit for developers. Following reasons: 1) the debug symbol is often not included. 2) there is often a high level of compilier o">
<meta property="og:type" content="article">
<meta property="og:title" content="For developers: how to build & run Greenplum for debugging purposes">
<meta property="og:url" content="http://shenyu.wiki/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/index.html">
<meta property="og:site_name" content="小宇的博客">
<meta property="og:description" content="The binary install package downloaded from the official website is not suit for developers. Following reasons: 1) the debug symbol is often not included. 2) there is often a high level of compilier o">
<meta property="og:updated_time" content="2017-03-08T09:05:27.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="For developers: how to build & run Greenplum for debugging purposes">
<meta name="twitter:description" content="The binary install package downloaded from the official website is not suit for developers. Following reasons: 1) the debug symbol is often not included. 2) there is often a high level of compilier o">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

<!-- for mermaid -->


    <link rel="alternate" href="/atom.xml" title="小宇的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="/uploads/siteicon.png">





    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>For developers: how to build &amp; run Greenplum for debugging purposes | 小宇的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: false,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
	
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/uploads/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">小宇</a></h1>
        </hgroup>

        
        <p class="header-subtitle">文章：113字数：564297</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-home icon-2x">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">归档</a></li>
                        
                            <li><a href="/tags/">标签</a></li>
                        
                            <li><a href="/map/">导航</a></li>
                        
                            <li><a href="/message/">留言</a></li>
                        
                            <li><a href="/about/">关于</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:shenyufly@163.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="http://github.com/shenyuflying" title="GitHub"></a>
                            
                                <a class="fa RSS" href="http://1572339ac8.iok.la:34421" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DTCC/">DTCC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECPG/">ECPG</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Greenplum/">Greenplum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux使用/">Linux使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux编程/">Linux编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OCI/">OCI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ODBC/">ODBC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PLSQL/">PLSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL/">PostgreSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL使用/">PostgreSQL使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL内核/">PostgreSQL内核</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PostgreSQL接口/">PostgreSQL接口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm/">algorithm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/assembly/">assembly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bug/">bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cctree/">cctree</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cflow/">cflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/codeviz/">codeviz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debug/">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dns/">dns</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dnsmasq/">dnsmasq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/doxygen/">doxygen</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/egypt/">egypt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/events/">events</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gdb/">gdb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gprof/">gprof</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kcachegrind/">kcachegrind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mathjax/">mathjax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nas/">nas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextcloud/">nextcloud</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pgxc/">pgxc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programming/">programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sed/">sed</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/valgrind/">valgrind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wget/">wget</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础知识/">基础知识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/备份还原/">备份还原</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小宇带你学PostgreSQL内核/">小宇带你学PostgreSQL内核</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开源社区/">开源社区</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术分享/">技术分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/接口/">接口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/操作系统/">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库，PostgreSQL/">数据库，PostgreSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文章/">文章</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/旅行/">旅行</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/本地化/">本地化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/架构/">架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/查询优化/">查询优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树莓派/">树莓派</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编调试方法/">汇编调试方法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爱好/">爱好</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程/">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程语言/">编程语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语言层/">语言层</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书/">读书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调优/">调优</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于基础软件研发</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">小宇</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/uploads/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">小宇</a></h1>
            </hgroup>
            
            <p class="header-subtitle">文章：113字数：564297</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">归档</a></li>
                
                    <li><a href="/tags/">标签</a></li>
                
                    <li><a href="/map/">导航</a></li>
                
                    <li><a href="/message/">留言</a></li>
                
                    <li><a href="/about/">关于</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:shenyufly@163.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="http://github.com/shenyuflying" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="http://1572339ac8.iok.la:34421" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-For-developers-how-to-build-run-Greenplum-for-debugging-purposes" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/" class="article-date">
      <time datetime="2017-03-08T02:32:06.000Z" itemprop="datePublished">2017-03-08</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      For developers: how to build &amp; run Greenplum for debugging purposes
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术分享/">技术分享</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Greenplum/">Greenplum</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据库/">数据库</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>The binary install package downloaded from the official website is not suit for developers. Following reasons: 1) the debug symbol is often not included. 2) there is often a high level of compilier optimization. 3) you cannot match the binary executable with the original source code. As a result, you will find trouble when debugging using gdb. So, developers often dowload the source code and complile it on their own, keeping whatever infos avaliable in the binary executable for debugging. This article is about how to build Greenplum from source code and deploy it on a single machine for developer debugging purposes.</p>
</blockquote>
<h2 id="Install-from-source"><a href="#Install-from-source" class="headerlink" title="Install from source"></a>Install from source</h2><p>The first step of get everything going is always the same: get the source code. The greenplum is currently hosted on github, which you can get the source code like this<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/greenplum-db/gpdb.git</div></pre></td></tr></table></figure></p>
<p>Afterwards, it much the same like all other Linux based software, you have to do the 3 steps: configure, make, make install.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">./configure  CFLAGS=&quot;-O0 -gdwarf-2 -g3&quot; --prefix=`pwd`/release  --with-perl --with-python --with-libxml --enable-mapreduce --enable-debug</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure></p>
<p>Here we add <code>-O0</code> to the CFLAGS, so that no complier optimization will take place. And we have <code>--enable-debug</code> configuration option set to build all the debugging info in the binary file.  We also add <code>-gdwarf-2 -g3</code> to the CFLAGS so all the defination of  macros is keeped.<br>If you met configure error, it is because you are missing some of the libs refer to FAQ for more info.<br>After you <code>make install</code> the gp database, all the binary executable file will be located under the <code>release</code> directroy.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gpadmin@yshen-ThinkPad-X201:~/gpdb/release$ ls</div><div class="line">bin  conf  demo  doc  docs  greenplum_path.sh  include  lib  sbin  share</div></pre></td></tr></table></figure></p>
<h2 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h2><h3 id="layout-of-the-gp-database-cluster"><a href="#layout-of-the-gp-database-cluster" class="headerlink" title="layout of the gp database cluster"></a>layout of the gp database cluster</h3><p>It considered easier to debug  if we only have all segemets installed on one computer. By doing so, it will not cause trouble for you to set up miltiple computers or virtual machines. In the meantime, you still have the basic distribution layout of the system. So the cluster layout is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">master host</div><div class="line">|</div><div class="line">-----&gt;segment host1 [primary1 primary2 primary3  mirror1 mirror2 mirror3]</div></pre></td></tr></table></figure>
<p>We have master and segement hosts installed on our localhost, and 3 primary segements plus 3 mirror segements installed on segment host which is also localhost. So, alltogether we have 7 postgres backend running on localhost. You can examin how many postgres backend process is running by <code>ps aux | grep bin/postgres | wc -l</code>, in this situation, the output is 7.</p>
<h3 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h3><p>By editing <code>hosts</code> file, the mdw ( master ) and sdw ( segment ) will point to the local host.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cat /etc/hosts</div><div class="line">127.0.0.1 mdw</div><div class="line">127.0.0.1 sdw1</div></pre></td></tr></table></figure></p>
<p>we should also create a file <code>all_hosts</code> to keep a list of all master and segment hosts.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cat /home/gpadmin/gpdb/release/conf/all_hosts </div><div class="line">mdw</div><div class="line">sdw1</div></pre></td></tr></table></figure></p>
<p>The <code>seg_hosts</code> file only have all the segment hosts.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cat /home/gpadmin/gpdb/release/conf/seg_hosts </div><div class="line">sdw1</div></pre></td></tr></table></figure></p>
<p>Later the two files will be used by <code>gpinitsystem</code> command.</p>
<p>We also have to set up the folder to store the data. Each primary and mirror segment plus the master segment have a folder, in our case there are 7 folders.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mkdir -p /home/gpadmin/gpdata/gpmaster</div><div class="line">mkdir -p /home/gpadmin/gpdata/gpdatap1</div><div class="line">mkdir -p /home/gpadmin/gpdata/gpdatap2</div><div class="line">mkdir -p /home/gpadmin/gpdata/gpdatap3</div><div class="line">mkdir -p /home/gpadmin/gpdata/gpdatam1</div><div class="line">mkdir -p /home/gpadmin/gpdata/gpdatam2</div><div class="line">mkdir -p /home/gpadmin/gpdata/gpdatam3</div></pre></td></tr></table></figure></p>
<h3 id="Ininit-the-system"><a href="#Ininit-the-system" class="headerlink" title="Ininit the system"></a>Ininit the system</h3><p>The file <code>gpinitsystem_config</code> is for the command <code>gpinitsystem</code> to know how many hosts are there in the cluster and how many primary/mirror segments will have on a single host. You can find a sample of configuration file in <code>$GPHOME/docs/cli_help/gpconfigs/gpinitsystem_config</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"># FILE NAME: gpinitsystem_config</div><div class="line"></div><div class="line"># Configuration file needed by the gpinitsystem</div><div class="line"></div><div class="line">################################################</div><div class="line">#### REQUIRED PARAMETERS</div><div class="line">################################################</div><div class="line"></div><div class="line">#### Name of this Greenplum system enclosed in quotes.</div><div class="line">ARRAY_NAME=&quot;Greenplum&quot;</div><div class="line"></div><div class="line">#### Naming convention for utility-generated data directories.</div><div class="line">SEG_PREFIX=gpseg</div><div class="line"></div><div class="line">#### Base number by which primary segment port numbers </div><div class="line">#### are calculated.</div><div class="line">PORT_BASE=40000</div><div class="line"></div><div class="line">#### File system location(s) where primary segment data directories </div><div class="line">#### will be created. The number of locations in the list dictate</div><div class="line">#### the number of primary segments that will get created per</div><div class="line">#### physical host (if multiple addresses for a host are listed in </div><div class="line">#### the hostfile, the number of segments will be spread evenly across</div><div class="line">#### the specified interface addresses).</div><div class="line">declare -a DATA_DIRECTORY=(/home/gpadmin/gpdata/gpdatap1 /home/gpadmin/gpdata/gpdatap2 /home/gpadmin/gpdata/gpdatap3)</div><div class="line"></div><div class="line">#### OS-configured hostname or IP address of the master host.</div><div class="line">MASTER_HOSTNAME=mdw</div><div class="line"></div><div class="line">#### File system location where the master data directory </div><div class="line">#### will be created.</div><div class="line">MASTER_DIRECTORY=/home/gpadmin/gpdata/gpmaster</div><div class="line"></div><div class="line">#### Port number for the master instance. </div><div class="line">MASTER_PORT=5432</div><div class="line"></div><div class="line">#### Shell utility used to connect to remote hosts.</div><div class="line">TRUSTED_SHELL=ssh</div><div class="line">#### Maximum log file segments between automatic WAL checkpoints.</div><div class="line">CHECK_POINT_SEGMENTS=8</div><div class="line"></div><div class="line">#### Default server-side character set encoding.</div><div class="line">ENCODING=UNICODE</div><div class="line"></div><div class="line">################################################</div><div class="line">#### OPTIONAL MIRROR PARAMETERS</div><div class="line">################################################</div><div class="line"></div><div class="line">#### Base number by which mirror segment port numbers </div><div class="line">#### are calculated.</div><div class="line">MIRROR_PORT_BASE=50000</div><div class="line"></div><div class="line">#### Base number by which primary file replication port </div><div class="line">#### numbers are calculated.</div><div class="line">REPLICATION_PORT_BASE=41000</div><div class="line"></div><div class="line">#### Base number by which mirror file replication port </div><div class="line">#### numbers are calculated. </div><div class="line">MIRROR_REPLICATION_PORT_BASE=51000</div><div class="line"></div><div class="line">#### File system location(s) where mirror segment data directories </div><div class="line">#### will be created. The number of mirror locations must equal the</div><div class="line">#### number of primary locations as specified in the </div><div class="line">#### DATA_DIRECTORY parameter.</div><div class="line">declare -a MIRROR_DATA_DIRECTORY=(/home/gpadmin/gpdata/gpdatam1 /home/gpadmin/gpdata/gpdatam2 /home/gpadmin/gpdata/gpdatam3)</div><div class="line"></div><div class="line">################################################</div><div class="line">#### OTHER OPTIONAL PARAMETERS</div><div class="line">################################################</div><div class="line"></div><div class="line">#### Create a database of this name after initialization.</div><div class="line">DATABASE_NAME=postgres</div><div class="line"></div><div class="line">#### Specify the location of the host address file here instead of</div><div class="line">#### with the the -h option of gpinitsystem.</div><div class="line">MACHINE_LIST_FILE=/home/gpadmin/gpdb/release/conf/seg_hosts</div></pre></td></tr></table></figure></p>
<p>Before doing the initialization, we have to add a few environment variable, like <code>GPHOME</code> by doing:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~/gpdb/release$ source greenplum_path.sh</div></pre></td></tr></table></figure>
<p>The GPHOME is set up by <code>configure</code>, so be sure to make it correct after you move the <code>release</code> folder to another location.<br>Inorder all the paths remain effective, you’d better add all the PATHs to your profile by:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cat greenplum_path.sh &gt;&gt; ~/.profile</div></pre></td></tr></table></figure></p>
<blockquote>
<p>NOTICE: in order to run py scripts under bin directoy you have to  <code>export PYTHONPATH=$PYTHONPATH:~/gpdb/gpMgmt/bin/ext</code></p>
</blockquote>
<p>Ok, if you get here we are ready to rock and roll. Start the initialization of the system by typing the command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpadmin@yshen-ThinkPad-X201:~/gpdb/release/bin$ ./gpinitsystem -c gpinitsystem_config</div></pre></td></tr></table></figure></p>
<p>There will be long list of logs showing what happend.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div></pre></td><td class="code"><pre><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checking configuration parameters, please wait...</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Reading Greenplum configuration file gpinitsystem_config</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Locale has not been set in gpinitsystem_config, will set to default value</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Locale set to en_US.utf8</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[WARN]:-Master hostname mdw does not match hostname output</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checking to see if mdw can be resolved on this host</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Can resolve mdw to this host</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-MASTER_MAX_CONNECT not set, will set to default value 250</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Detected a single host GPDB array build, reducing value of BATCH_DEFAULT from 60 to 4</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[WARN]:-Master open file limit is 1024 should be &gt;= 65535</div><div class="line">20170307:21:30:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checking configuration parameters, Completed</div><div class="line">20170307:21:30:53:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing multi-home checks, please wait...</div><div class="line">.</div><div class="line">20170307:21:30:53:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Configuring build for standard array</div><div class="line">20170307:21:30:53:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing multi-home checks, Completed</div><div class="line">20170307:21:30:53:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Building primary segment instance array, please wait...</div><div class="line">...</div><div class="line">20170307:21:30:55:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Building group mirror array type , please wait...</div><div class="line">...</div><div class="line">20170307:21:30:57:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checking Master host</div><div class="line">20170307:21:30:57:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checking new segment hosts, please wait...</div><div class="line">20170307:21:30:58:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[WARN]:-Host mdw open files limit is 1024 should be &gt;= 65535</div><div class="line">......</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checking new segment hosts, Completed</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum Database Creation Parameters</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:---------------------------------------</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master Configuration</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:---------------------------------------</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master instance name       = Greenplum</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master hostname            = mdw</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master port                = 5432</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master instance dir        = /home/gpadmin/gpdata/gpmaster/gpseg-1</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master LOCALE              = en_US.utf8</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum segment prefix   = gpseg</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master Database            = postgres</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master connections         = 250</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master buffers             = 128000kB</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Segment connections        = 750</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Segment buffers            = 128000kB</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Checkpoint segments        = 8</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Encoding                   = UNICODE</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Postgres param file        = Off</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Initdb to be used          = /home/gpadmin/gpdb/release/bin/initdb</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-GP_LIBRARY_PATH is         = /home/gpadmin/gpdb/release/lib</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[WARN]:-Ulimit check               = Warnings generated, see log file &lt;&lt;&lt;&lt;&lt;</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Array host connect type    = Single hostname per node</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master IP address [1]      = ::1</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master IP address [2]      = 192.168.1.111</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master IP address [3]      = fe80::e181:909d:d2a4:8de0</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Standby Master             = Not Configured</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Primary segment #          = 3</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total Database segments    = 3</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Trusted shell              = ssh</div><div class="line">20170307:21:31:04:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Number segment hosts       = 1</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Mirror port base           = 50000</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Replicaton port base       = 41000</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Mirror replicaton port base= 51000</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Mirror segment #           = 3</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Mirroring config           = ON</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Mirroring type             = Group</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:----------------------------------------</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum Primary Segment Configuration</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:----------------------------------------</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-sdw1 	/home/gpadmin/gpdata/gpdatap1/gpseg0 	40000 	2 	0 	41000</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-sdw1 	/home/gpadmin/gpdata/gpdatap2/gpseg1 	40001 	3 	1 	41001</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-sdw1 	/home/gpadmin/gpdata/gpdatap3/gpseg2 	40002 	4 	2 	41002</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:---------------------------------------</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum Mirror Segment Configuration</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:---------------------------------------</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-sdw1 	/home/gpadmin/gpdata/gpdatam1/gpseg0 	50000 	5 	0 	51000</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-sdw1 	/home/gpadmin/gpdata/gpdatam2/gpseg1 	50001 	6 	1 	51001</div><div class="line">20170307:21:31:05:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-sdw1 	/home/gpadmin/gpdata/gpdatam3/gpseg2 	50002 	7 	2 	51002</div><div class="line"></div><div class="line">Continue with Greenplum creation Yy|Nn (default=N):</div><div class="line">&gt; Y</div><div class="line">20170307:21:31:07:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Building the Master instance database, please wait...</div><div class="line">20170307:21:31:15:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Starting the Master in admin mode</div><div class="line">20170307:21:31:23:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing parallel build of primary segment instances</div><div class="line">20170307:21:31:23:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Spawning parallel processes    batch [1], please wait...</div><div class="line">...</div><div class="line">20170307:21:31:24:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Waiting for parallel processes batch [1], please wait...</div><div class="line">............................</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:------------------------------------------------</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Parallel process exit status</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:------------------------------------------------</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total processes marked as completed           = 3</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total processes marked as killed              = 0</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total processes marked as failed              = 0</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:------------------------------------------------</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing parallel build of mirror segment instances</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Spawning parallel processes    batch [1], please wait...</div><div class="line">...</div><div class="line">20170307:21:31:52:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Waiting for parallel processes batch [1], please wait...</div><div class="line">...................</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:------------------------------------------------</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Parallel process exit status</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:------------------------------------------------</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total processes marked as completed           = 3</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total processes marked as killed              = 0</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Total processes marked as failed              = 0</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:------------------------------------------------</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Deleting distributed backout files</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Removing back out file</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-No errors generated from parallel processes</div><div class="line">20170307:21:32:12:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Restarting the Greenplum instance in production mode</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Starting gpstop with args: -a -l /home/gpadmin/gpAdminLogs -i -m -d /home/gpadmin/gpdata/gpmaster/gpseg-1</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Gathering information and validating the environment...</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Obtaining Greenplum Master catalog information</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Obtaining Segment details from master...</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum Version: &apos;postgres (Greenplum Database) 5.0.0-alpha.0-96-g0701a77 build dev&apos;</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-There are 0 connections to the database</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing Master instance shutdown with mode=&apos;immediate&apos;</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master host=yshen-ThinkPad-X201</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing Master instance shutdown with mode=immediate</div><div class="line">20170307:21:32:13:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master segment instance directory=/home/gpadmin/gpdata/gpmaster/gpseg-1</div><div class="line">20170307:21:32:14:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Attempting forceful termination of any leftover master process</div><div class="line">20170307:21:32:14:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[INFO]:-Terminating processes for segment /home/gpadmin/gpdata/gpmaster/gpseg-1</div><div class="line">20170307:21:32:14:004724 gpstop:yshen-ThinkPad-X201:gpadmin-[ERROR]:-Failed to kill processes for segment /home/gpadmin/gpdata/gpmaster/gpseg-1: ([Errno 3] No such process)</div><div class="line">20170307:21:32:14:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Starting gpstart with args: -a -l /home/gpadmin/gpAdminLogs -d /home/gpadmin/gpdata/gpmaster/gpseg-1</div><div class="line">20170307:21:32:14:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Gathering information and validating the environment...</div><div class="line">20170307:21:32:14:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum Binary Version: &apos;postgres (Greenplum Database) 5.0.0-alpha.0-96-g0701a77 build dev&apos;</div><div class="line">20170307:21:32:14:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Greenplum Catalog Version: &apos;301702171&apos;</div><div class="line">20170307:21:32:14:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Starting Master instance in admin mode</div><div class="line">20170307:21:32:15:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Obtaining Greenplum Master catalog information</div><div class="line">20170307:21:32:15:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Obtaining Segment details from master...</div><div class="line">20170307:21:32:15:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Setting new master era</div><div class="line">20170307:21:32:15:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Master Started...</div><div class="line">20170307:21:32:15:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Shutting down master</div><div class="line">20170307:21:32:17:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Commencing parallel primary and mirror segment instance startup, please wait...</div><div class="line">... </div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Process results...</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-----------------------------------------------------</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-   Successful segment starts                                            = 6</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-   Failed segment starts                                                = 0</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-   Skipped segment starts (segments are marked down in configuration)   = 0</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-----------------------------------------------------</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Successfully started 6 of 6 segment instances </div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-----------------------------------------------------</div><div class="line">20170307:21:32:20:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Starting Master instance yshen-ThinkPad-X201 directory /home/gpadmin/gpdata/gpmaster/gpseg-1 </div><div class="line">20170307:21:32:21:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Command pg_ctl reports Master yshen-ThinkPad-X201 instance active</div><div class="line">20170307:21:32:21:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-No standby master configured.  skipping...</div><div class="line">20170307:21:32:21:004811 gpstart:yshen-ThinkPad-X201:gpadmin-[INFO]:-Database successfully started</div><div class="line">20170307:21:32:21:010106 gpinitsystem:yshen-ThinkPad-X201:gpadmin-[INFO]:-Completed restart of Greenplum instance in production mode</div><div class="line">20170307:21:32:21:gpinitsystem:yshen-ThinkPad-X201:gpadmin-[FATAL]:-Failed to complete create database postgres  Script Exiting!</div></pre></td></tr></table></figure></p>
<h2 id="startup-amp-stop-database-server"><a href="#startup-amp-stop-database-server" class="headerlink" title="startup &amp; stop database server"></a>startup &amp; stop database server</h2><p>There are python script <code>gpstart</code>`gpstop` to start and stop the cluster all at once, so will save your the trouble of start\stop each of the segment by yourself.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpadmin@yshen-ThinkPad-X201:~/gpdb/release/bin$ ./gpstart -d ~/gpdata/gpmaster/gpseg-1/</div></pre></td></tr></table></figure>
<p>When the cluster is up and running, you can see each segment is running under each’s data directory. And you can tell easily which of them is master segment and primary/mirror segment.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">$ ps aux | grep bin/postgres</div><div class="line">gpadmin   4938  0.3  2.8 426780 230960 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpdatap2/gpseg1 -p 40001 --gp_dbid=3 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M quiescent --gp_contentid=1</div><div class="line">gpadmin   4939  0.3  2.8 424808 229148 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpdatam2/gpseg1 -p 50001 --gp_dbid=6 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M quiescent --gp_contentid=1</div><div class="line">gpadmin   4944  0.3  2.8 424804 229172 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpdatam1/gpseg0 -p 50000 --gp_dbid=5 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M quiescent --gp_contentid=0</div><div class="line">gpadmin   4946  0.3  2.9 426784 231048 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpdatap3/gpseg2 -p 40002 --gp_dbid=4 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M quiescent --gp_contentid=2</div><div class="line">gpadmin   4947  0.3  2.8 424808 229128 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpdatam3/gpseg2 -p 50002 --gp_dbid=7 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M quiescent --gp_contentid=2</div><div class="line">gpadmin   4948  0.3  2.8 426784 230904 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpdatap1/gpseg0 -p 40000 --gp_dbid=2 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M quiescent --gp_contentid=0</div><div class="line">gpadmin   5039  0.3  2.5 384580 205840 ?       Ss   21:32   0:00 /home/gpadmin/gpdb/release/bin/postgres -D /home/gpadmin/gpdata/gpmaster/gpseg-1 -p 5432 --gp_dbid=1 --gp_num_contents_in_cluster=3 --silent-mode=true -i -M master --gp_contentid=-1 -x 0 -E</div><div class="line">gpadmin   5306  0.0  0.0  21312  1092 pts/1    S+   21:33   0:00 grep --color=auto bin/postgres</div></pre></td></tr></table></figure></p>
<p>Much the same like how to start the cluster, you can use python script <code>gpstop</code> to stop all the cluster at once.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpadmin@yshen-ThinkPad-X201:~/gpdb/release/bin$ ./gpstop -d ~/gpdata/gpmaster/gpseg-1/</div></pre></td></tr></table></figure></p>
<h2 id="run-regression-test"><a href="#run-regression-test" class="headerlink" title="run regression test"></a>run regression test</h2><p>The first time cluster is running you can do a regression test to varify the correctness of your code.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make installcheck-world</div></pre></td></tr></table></figure></p>
<p>It took quite a while to finish all the tests. Later whenever you modify the source code you will have to run the regression test to make sure you do not affect other part of the code.</p>
<h2 id="Connecting-to-greenplum-cluster-using-psql"><a href="#Connecting-to-greenplum-cluster-using-psql" class="headerlink" title="Connecting to greenplum cluster using psql"></a>Connecting to greenplum cluster using psql</h2><p>You can connect to the <code>master segment</code> by  a CLI tool  called <code>psql</code>. The default port is <code>5432</code> and the default database we connect to is <code>postgres</code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">gpadmin@yshen-ThinkPad-X201:~/gpdb/release/bin$ ./psql</div><div class="line">psql (8.3.23)</div><div class="line">Type &quot;help&quot; for help.</div><div class="line"></div><div class="line">postgres=# SELECT version();</div><div class="line">                                                                                                version                                     </div><div class="line">                                                            </div><div class="line">--------------------------------------------------------------------------------------------------------------------------------------------</div><div class="line">------------------------------------------------------------</div><div class="line"> PostgreSQL 8.3.23 (Greenplum Database 5.0.0-alpha.0-96-g0701a77 build dev) on x86_64-pc-linux-gnu, compiled by GCC gcc (Ubuntu 5.4.0-6ubunt</div><div class="line">u1~16.04.4) 5.4.0 20160609 compiled on Mar  7 2017 18:25:13</div><div class="line">(1 row)</div></pre></td></tr></table></figure></p>
<p>You can issue a query to find out how the cluster is configured by<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">postgres=# SELECT * from gp_segment_configuration order by 1;</div><div class="line"> dbid | content | role | preferred_role | mode | status | port  |      hostname       | address | replication_port | san_mounts </div><div class="line">------+---------+------+----------------+------+--------+-------+---------------------+---------+------------------+------------</div><div class="line">    1 |      -1 | p    | p              | s    | u      |  5432 | yshen-ThinkPad-X201 | mdw     |                  | </div><div class="line">    2 |       0 | m    | p              | s    | d      | 40000 | yshen-ThinkPad-X201 | sdw1    |            41000 | </div><div class="line">    3 |       1 | p    | p              | s    | u      | 40001 | yshen-ThinkPad-X201 | sdw1    |            41001 | </div><div class="line">    4 |       2 | p    | p              | s    | u      | 40002 | yshen-ThinkPad-X201 | sdw1    |            41002 | </div><div class="line">    5 |       0 | p    | m              | c    | u      | 50000 | yshen-ThinkPad-X201 | sdw1    |            51000 | </div><div class="line">    6 |       1 | m    | m              | s    | u      | 50001 | yshen-ThinkPad-X201 | sdw1    |            51001 | </div><div class="line">    7 |       2 | m    | m              | s    | u      | 50002 | yshen-ThinkPad-X201 | sdw1    |            51002 | </div><div class="line">(7 rows)</div></pre></td></tr></table></figure></p>
<p>Here is some explaination about each column.</p>
<p>dbid : range from 1-N, where master segment is 1, then the primary segment, the last is the mirror segment.</p>
<p>content : master is -1, each primary &amp; mirror segment share the same value since there content is the same.</p>
<p>role : primary or mirror status of a segment is running in.</p>
<p>preferred_role : the original defination of primary or mirror for a segment.</p>
<p>mode : ‘s’ means synchronized. ‘r’ means resyncing. ‘c’ change logging.</p>
<p>status : ‘u’ means up. ‘d’ means down.</p>
<h2 id="Feature-testing"><a href="#Feature-testing" class="headerlink" title="Feature testing"></a>Feature testing</h2><p>Different from the original postgres, greenplum allows you to store your table data separetly on each segment host. The master segment stores only meta-data while each primary/mirror segment store the acutal data.<br>You can setup the distribution key when creating table:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">postgres=# CREATE TABLE tb1 ( id int, name varchar(100)) DISTRIBUTED BY (id);</div><div class="line">CREATE TABLE</div><div class="line">postgres=# \d tb1</div><div class="line">             Table &quot;public.tb1&quot;</div><div class="line"> Column |          Type          | Modifiers </div><div class="line">--------+------------------------+-----------</div><div class="line"> id     | integer                | </div><div class="line"> name   | character varying(100) | </div><div class="line">Distributed by: (id)</div><div class="line"></div><div class="line"></div><div class="line">postgres=# INSERT INTO tb1 values(generate_series(1,1000));</div><div class="line">INSERT 0 1000</div></pre></td></tr></table></figure></p>
<p>After the data is inserted all the data is distribute by ID on each segment host. You can exmain how they are distributed by issuing command:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">postgres=# select gp_segment_id,count(*) from tb1 group by 1 order by 1;</div><div class="line"> gp_segment_id | count </div><div class="line">---------------+-------</div><div class="line">             0 |   321</div><div class="line">             1 |   342</div><div class="line">             2 |   337</div><div class="line">(3 rows)</div></pre></td></tr></table></figure></p>
<p>Or you can find out which segment a specific tuple is reside by the system column <code>gp_segment_id</code> :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">postgres=# SELECT gp_segment_id , * from tb1 where id = 99;</div><div class="line"> gp_segment_id | id |       name        </div><div class="line">---------------+----+-------------------</div><div class="line">             2 | 99 | 0.459008027799428</div><div class="line">(1 row)</div></pre></td></tr></table></figure>
<p>When you query some data from the cluster. The plan is parallized, each segment is execute a seq scan on its part of data and gathered by the master host</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">postgres=# EXPLAIN SELECT * FROM tb1;</div><div class="line">                                   QUERY PLAN                                    </div><div class="line">---------------------------------------------------------------------------------</div><div class="line"> Gather Motion 3:1  (slice1; segments: 3)  (cost=0.00..13.00 rows=1000 width=22)</div><div class="line">   -&gt;  Seq Scan on tb1  (cost=0.00..13.00 rows=334 width=22)</div><div class="line">(2 rows)</div></pre></td></tr></table></figure>
<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="dependences-might-have-to-be-installed"><a href="#dependences-might-have-to-be-installed" class="headerlink" title="dependences might have to be installed"></a>dependences might have to be installed</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sudo apt install libapr1-dev   libevent-dev </div><div class="line">sudo apt install  libxml2*</div><div class="line">sudo apt install libcurl3-dev</div><div class="line">sudo apt install libghc-bzlib-dev</div><div class="line">sudo apt install libyaml-dev</div><div class="line">sudo apt install libpython-all-dev</div><div class="line">sudo apt install libperl-dev</div><div class="line">sudo apt install libpython-all-dev</div><div class="line">sudo apt install python-py  pip</div></pre></td></tr></table></figure>
<h3 id="cannot-establish-ssh-access-into-the-local-host"><a href="#cannot-establish-ssh-access-into-the-local-host" class="headerlink" title="cannot establish ssh access into the local host"></a>cannot establish ssh access into the local host</h3><p>if you see the following erro message:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ gpssh-exkeys -f ../conf/all_hosts </div><div class="line">[STEP 1 of 5] create local ID and authorize on local host</div><div class="line">  ... /home/yshen/.ssh/id_rsa file exists ... key generation skipped</div><div class="line">[ERROR yshen-ThinkPad-X201] authentication check failed:</div><div class="line">     ssh: connect to host yshen-thinkpad-x201 port 22: Connection refused</div><div class="line">[ERROR] cannot establish ssh access into the local host</div></pre></td></tr></table></figure></p>
<p>that means you have’t install ssh-server on your os, run the following commands to do so:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$  sudo apt-get install openssh-server</div><div class="line">$ sudo /etc/init.d/ssh start</div><div class="line">[ ok ] Starting ssh (via systemctl): ssh.service.</div></pre></td></tr></table></figure></p>
<h3 id="bad-password"><a href="#bad-password" class="headerlink" title="bad password"></a>bad password</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ gpssh-exkeys -f ../conf/all_hosts </div><div class="line">[STEP 1 of 5] create local ID and authorize on local host</div><div class="line">  ... /home/yshen/.ssh/id_rsa file exists ... key generation skipped</div><div class="line"></div><div class="line">[STEP 2 of 5] keyscan all hosts and update known_hosts file</div><div class="line"></div><div class="line">[STEP 3 of 5] authorize current user on remote hosts</div><div class="line">  ... send to mdw</div><div class="line">  ***</div><div class="line">  *** Enter password for mdw: </div><div class="line">[ERROR mdw] bad password</div><div class="line">  ***</div><div class="line">  *** Enter password for mdw: </div><div class="line">[ERROR mdw] bad password</div><div class="line">  ***</div><div class="line">  *** Enter password for mdw: </div><div class="line">[ERROR mdw] bad password</div><div class="line">  ***</div><div class="line">  *** Enter password for mdw:</div></pre></td></tr></table></figure>
<p>If you met the above error message, means you are not logged in as gpadmin user.</p>
<h3 id="No-module-named-paramiko"><a href="#No-module-named-paramiko" class="headerlink" title="No module named paramiko"></a>No module named paramiko</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./gpssh-exkeys -f ../conf/all_hosts </div><div class="line">Error: unable to import module: No module named paramiko</div></pre></td></tr></table></figure>
<p>You are missing some of the python libs.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install paramiko psutil</div></pre></td></tr></table></figure></p>
<h3 id="cannot-run-the-python-script-under-GPHOME-bin-dir"><a href="#cannot-run-the-python-script-under-GPHOME-bin-dir" class="headerlink" title="cannot run the python script under $GPHOME/bin dir"></a>cannot run the python script under $GPHOME/bin dir</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">~/gpdb/release/bin$ export PYTHONPATH=~/gpdb/gpMgmt/bin/ext:$PYTHONPATH</div></pre></td></tr></table></figure>
<h3 id="ImportError-No-module-named-lockfile-pidlockfile"><a href="#ImportError-No-module-named-lockfile-pidlockfile" class="headerlink" title="ImportError: No module named lockfile.pidlockfile"></a>ImportError: No module named lockfile.pidlockfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ ./gpstart -a</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;./gpstart&quot;, line 9, in &lt;module&gt;</div><div class="line">    from gppylib.mainUtils import *</div><div class="line">  File &quot;/home/gpadmin/gpdb/release/lib/python/gppylib/mainUtils.py&quot;, line 37, in &lt;module&gt;</div><div class="line">    from lockfile.pidlockfile import PIDLockFile, LockTimeout</div><div class="line">ImportError: No module named lockfile.pidlockfile</div><div class="line">```You are missing some of the python libs.</div><div class="line">You are missing some of the python libs.</div></pre></td></tr></table></figure>
<p>pip install lockfile<br>```</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/">For developers: how to build &amp; run Greenplum for debugging purposes</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">小宇</a></p>
        <p><span>发布时间:</span>2017-03-08, 10:32:06</p>
        <p><span>最后更新:</span>2017-03-08, 17:05:27</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/" title="For developers: how to build &amp; run Greenplum for debugging purposes">http://shenyu.wiki/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/</a>
            <span class="copy-path" data-clipboard-text="原文: http://shenyu.wiki/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/　　作者: 小宇" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/03/11/Readings-of-query-optimizer/">
                    Readings of query optimizer
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2017/03/05/nextcloud——搭建自己的云盘/">
                    nextcloud——搭建自己的云盘
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Install-from-source"><span class="toc-number">1.</span> <span class="toc-text">Install from source</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Initialization"><span class="toc-number">2.</span> <span class="toc-text">Initialization</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#layout-of-the-gp-database-cluster"><span class="toc-number">2.1.</span> <span class="toc-text">layout of the gp database cluster</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Preparation"><span class="toc-number">2.2.</span> <span class="toc-text">Preparation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Ininit-the-system"><span class="toc-number">2.3.</span> <span class="toc-text">Ininit the system</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#startup-amp-stop-database-server"><span class="toc-number">3.</span> <span class="toc-text">startup & stop database server</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#run-regression-test"><span class="toc-number">4.</span> <span class="toc-text">run regression test</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Connecting-to-greenplum-cluster-using-psql"><span class="toc-number">5.</span> <span class="toc-text">Connecting to greenplum cluster using psql</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Feature-testing"><span class="toc-number">6.</span> <span class="toc-text">Feature testing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FAQ"><span class="toc-number">7.</span> <span class="toc-text">FAQ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#dependences-might-have-to-be-installed"><span class="toc-number">7.1.</span> <span class="toc-text">dependences might have to be installed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cannot-establish-ssh-access-into-the-local-host"><span class="toc-number">7.2.</span> <span class="toc-text">cannot establish ssh access into the local host</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bad-password"><span class="toc-number">7.3.</span> <span class="toc-text">bad password</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#No-module-named-paramiko"><span class="toc-number">7.4.</span> <span class="toc-text">No module named paramiko</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cannot-run-the-python-script-under-GPHOME-bin-dir"><span class="toc-number">7.5.</span> <span class="toc-text">cannot run the python script under $GPHOME/bin dir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ImportError-No-module-named-lockfile-pidlockfile"><span class="toc-number">7.6.</span> <span class="toc-text">ImportError: No module named lockfile.pidlockfile</span></a></li></ol></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"For developers: how to build & run Greenplum for debugging purposes　| 小宇的博客　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/" data-title="For developers: how to build &amp; run Greenplum for debugging purposes" data-url="http://shenyu.wiki/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/"></div>
    <script>
        var duoshuoQuery = {short_name:"shenyuflying"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
    </script>
    
    <script> loadComment(); </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/03/11/Readings-of-query-optimizer/" title="上一篇: Readings of query optimizer">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2017/03/05/nextcloud——搭建自己的云盘/" title="下一篇: nextcloud——搭建自己的云盘">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/11/20/一例数组越界引发栈被破坏问题的定位与修复/">一例数组越界引发栈被破坏问题的定位与修复</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/18/深入理解postgres嵌入式sql/">深入理解postgres嵌入式sql</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/29/Writing-coredump-free-codes-by-handling-of-SIGSEGV/">Writing coredump free codes by handling of SIGSEGV</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/04/where-does-bug-come-from-1/">where does bug come from</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/30/租房管理系统/">编程题--租房管理系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/16/OID超过40亿会发生什么？/">OID超过40亿会发生什么？</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/15/a-very-handy-logging-function/">a very handy logging function</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/15/postgres-keepalive/">postgres keepalive</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/27/where-does-bug-come-from/">where does bug come from</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/24/hanoi/">hanoi</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/22/Efficient-Locking-for-Concurrent-Operations-on-B-Trees/">Efficient Locking for Concurrent Operations on B-Trees</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/18/postgres-xc-concept-implementation-and-achievements/">postgres-xc concept implementation and achievements</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/12/with-hold-cursor/">with hold cursor</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/25/数据库使用bytea类型存取二进制文件/">数据库使用bytea类型存取二进制文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/25/DTCC2017/">DTCC2017</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/10/postgres-identifier-and-keyworkd/">postgres identifier and keyword</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/06/获取字段分组个数/">获取字段分组个数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/22/裤子把人搞死？一个库引发的悲剧/">裤子把人搞死？一个库引发的悲剧</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/12/a-nice-progressbar-with-time-estimation/">a nice progressbar with time estimation</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/09/vim-build-from-source/">vim build from source</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/03/bit-map-sets-sorting/">bitmap sets sorting</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/26/awesome-awesome-lots-of-good-stuff/">awesome awesome lots of good stuff</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/25/traversing-tree-in-preorder-inorder-postorder-and-level-order/">traversing tree in preorder inorder postorder and level order</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/12/source-insight-color-theme/">Source insight color theme</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/11/Readings-of-query-optimizer/">Readings of query optimizer</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/08/For-developers-how-to-build-run-Greenplum-for-debugging-purposes/">For developers: how to build & run Greenplum for debugging purposes</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/05/nextcloud——搭建自己的云盘/">nextcloud——搭建自己的云盘</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/how-to-change-your-linux-timezone/">how to set your linux's timezone</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/16/科学上网——搭建自己的DNS服务器/">科学上网——搭建自己的DNS服务器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/14/如何阅读程序源码之——call-graph/">如何阅读程序源码之——call graph</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/soname/">soname</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/an-introduction-to-odbc/">An introduction to ODBC</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/odbc-programming/">ODBC programming</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/how-to-setup-postgresql-odbc/">How to setup postgresql ODBC</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/31/过年在家写了一个蛮有趣的小程序：codeRunner/">过年在家写了一个蛮有趣的小程序：codeRunner</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/22/The-best-career-advice-I’ve-received/">The best career advice I’ve received</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/汇编调试方法-20160526/">汇编调试方法-20160526</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/19/汇编调试方法-20160506/">汇编调试方法-20160506</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/18/修改hosts来访问谷歌/">修改hosts来访问谷歌</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/17/如果你要给学生一些学习建议，你会说些什么/">如果你要给学生一些学习建议，你会说些什么</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/16/hexo博客增加菜单栏目/">hexo博客增加菜单栏目</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/13/PostgreSQL中的PL-SQL实现/">PostgreSQL中的PL/SQL实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/12/PostgreSQL逻辑备份还原/">PostgreSQL逻辑备份还原</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/08/【小宇带你学PostgreSQL内核】第五课：rewriter分析和重写（上）/">【小宇带你学PostgreSQL内核】第五课：rewriter分析和重写（上）</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/05/git统计代码贡献/">git统计代码贡献</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/02/pg-logical-backup-restore/">PostgreSQL logical backup & restore</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/01/【小宇带你学PostgreSQL内核】第四课：parser语法分析/">【小宇带你学PostgreSQL内核】第四课：parser语法分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/29/GDB图形界面大PK/">GDB图形界面大PK</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/18/【小宇带你学PostgreSQL内核】第三课：内核架构2/">【小宇带你学PostgreSQL内核】第三课：内核架构(下)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/18/【小宇带你学PostgreSQL内核】第三课：内核架构1/">【小宇带你学PostgreSQL内核】第三课：内核架构(上)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/18/PostgreSQL-internal-roadmap/">PostgresSQL-internal-roadmap</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/14/yshen-s-vim-settings/">yshen's vim settings</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/11/【小宇带你学PostgreSQL内核】第二课：开发环境/">【小宇带你学PostgreSQL内核】第二课：开发环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/11/【小宇带你学PostgreSQL内核】第一课：课程简介/">【小宇带你学PostgreSQL内核】第一课：课程简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/29/PostgreSQL内存盘性能测试/">PostgreSQL内存盘性能测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/27/好书推荐：《Debug-hacks——深入调试的技术和工具》/">好书推荐：《Debug hacks——深入调试的技术和工具》</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/26/缓冲区溢出的那些事儿/">缓冲区溢出的那些事儿</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/21/深入理解静态链接库和动态链接库/">深入理解静态链接库和动态链接库</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/21/深入理解PostgreSQL查询优化引擎/">深入理解PostgreSQL查询优化引擎</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/20/linux把文件放置到剪贴板/">linux把文件放置到剪贴板</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/c语言程序输出调试信息/">c语言程序输出调试信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/14/c和汇编混合编程/">c和汇编混合编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/13/PostgreSQL中的spinlock实现的基本原理/">PostgreSQL中的spinlock实现的基本原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/12/linux中进程共享内存的2种方法/">linux中进程共享内存的2种方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/10/linux进程改名/">linux进程改名</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/PostgreSQL源码中的EXEC-BACKEND宏/">PostgreSQL源码中的EXEC_BACKEND宏</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/PostgreSQL-ODBC-driver-internal/">PostgreSQL ODBC driver internal</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/04/pgNodeGraph-a-postgreSQL-node-tree-print-tool/">pgNodeGraph -- a postgreSQL node tree print tool</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/PostgreSQL本地化过程及维护/">PostgreSQL本地化过程及维护</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/02/C语言程序的国际化/">C语言程序的国际化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/x86-64汇编与调试/">x86_64汇编与调试</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/golang-web编程之——读取csdn最新文章/">golang web编程之——读取csdn最新文章</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/27/PostgreSQL中的字符编码/">PostgreSQL中的字符编码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/27/linux中的本地化/">linux中的本地化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/21/交互式代码格式化工具——indent/">交互式代码格式化工具——indent</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/20/利用sed生成规范的c代码/">利用sed生成规范的c代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/14/yap-yet-another-program-profiling-tool/">yap--yet another program profiling tool</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/PostgreSQL性能分析/">PostgreSQL性能分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/PostgreSQL日志分析工具——pgBadger/">PostgreSQL日志分析工具——pgBadger</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/linux监控脚本-绘图/">linux性能曲线工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/数据库性能测试标准TPC/">数据库性能测试标准TPC</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/好书推荐：《操作系统设计与实现》/">好书推荐：《操作系统设计与实现》</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/linux中的硬链接和软链接/">linux中的硬链接和软链接</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/linux中的僵尸进程/">linux中的僵尸进程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/字符串中特殊字符转义——php中urlencode-urldecode的c语言版本/">字符串中特殊字符转义——php中urlencode urldecode的c语言版本</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/05/好文推荐：《Spanner-Google-s-Globally-Distributed-Database》/">好文推荐：《Spanner: Google's Globally-Distributed Database》</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/05/linux下配置IP地址子网掩码和网关/">linux下配置IP地址子网掩码和网关</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/05/ssh免密码登陆linux主机/">ssh免密码登陆linux主机</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/04/linux查找文件内容/">linux查找文件内容</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/04/好书推荐：《软技能-代码之外的生存指南》/">好书推荐：《软技能-代码之外的生存指南》</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/04/颐和园/">颐和园 Summer Palace</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/04/hexo静态博客修改侧边栏/">hexo静态博客修改侧边栏</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/02/wget下载网站供离线浏览/">wget下载网站供离线浏览</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/02/二进制文件-十六进制文件-互转/">二进制文件 十六进制文件 互转</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/02/PostgreSQL-count-优化/">PostgreSQL count(*) 优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/02/Here-Document/">Here Document</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/贪吃蛇-基于SDL/">贪吃蛇-基于SDL</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/c语言转汇编语言shell脚本/">c语言转汇编语言shell脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/linux-shell聊天室/">linux shell聊天室</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/linux-shell-切换程序/">在linux shell 下切换程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/奥运会成绩管理系统/">奥运会成绩管理系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/Mathjax公式/">Mathjax公式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/15/长城/">长城 Great Wall</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/06/09/北京奥林匹克公园/">北京奥林匹克公园 Beijing Olympic Park</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/01/天安门/">天安门 Tiananmen</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/08/兰州/">兰州 Lanzhou</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/01/20/markdown-test/">markdown test</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/02/17/mysql大数据处理/">mysql数据处理</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/31/动态增长的栈/">动态增长的栈</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/10/02/清华北大/">清华北大 Tsinghua and Peking University</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/10/01/西安/">西安 Xi'an</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/02/04/岳麓书院/">岳麓书院</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/02/04/凤凰古城/">凤凰古城 Phoenix Town</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2014-2017 小宇
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>